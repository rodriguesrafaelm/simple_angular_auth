"use strict";(self.webpackChunksimple_auth=self.webpackChunksimple_auth||[]).push([[851],{6851:(L,g,u)=>{u.r(g),u.d(g,{HomeModule:()=>q});var c=u(6895),e=u(8256);let h=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez]}),o})();var b=u(4004),s=u(433);function U(o){const r=o.get("password")?.value??"",n=o.get("password2")?.value??"";return r.trim()+n.trim()?r==n?null:{senhasDiferentes:!0}:null}var l=u(5808),_=u(2340),d=u(529);let Z=(()=>{class o{constructor(n){this.httpClient=n,this.url=_.N.apiURL}cadastrarNovoUsuario(n){return this.httpClient.post(this.url+"/user/signup",n,{observe:"response"})}consultarDisponibilidadeUsuario(n){return this.httpClient.post(this.url+"/user/get-user",{username:n})}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(d.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=u(620);let C=(()=>{class o{constructor(){this.mensagem=""}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mensagens"]],inputs:{mensagem:"mensagem"},decls:2,vars:1,consts:[[1,"text-danger","d-block","mt-2"]],template:function(n,t){1&n&&(e.TgZ(0,"small",0),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(t.mensagem))}}),o})();function T(o,r){1&o&&e._UZ(0,"app-mensagens",24)}function y(o,r){1&o&&(e.TgZ(0,"div",25),e._uU(1," Usu\xe1rio j\xe1 existe. "),e.qZA())}function F(o,r){1&o&&e._UZ(0,"app-mensagens",26)}function w(o,r){1&o&&e._UZ(0,"app-mensagens",27)}function N(o,r){1&o&&e._UZ(0,"app-mensagens",28)}let A=(()=>{class o{constructor(n,t,a,i){this.formBuilder=n,this.router=t,this.novoUsuarioService=a,this.usuarioService=i,this.usernameStatus={message:!0}}ngOnInit(){this.novoUsuarioForm=this.formBuilder.group({username:["",[s.kI.required,s.kI.minLength(4)]],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(8)]],password2:[""]},{validators:[U]})}cadastrar(){if(this.novoUsuarioForm.valid){const n=this.novoUsuarioForm.getRawValue();this.novoUsuarioService.cadastrarNovoUsuario(n).subscribe({next:t=>{const a=t.headers.get("x-access-token")??"";this.usuarioService.salvaToken(a),this.router.navigate(["dashboard"])},error:t=>console.log("Ocorreu um erro.")})}}verificarDisponibilidade(n){n.length>4&&this.novoUsuarioService.consultarDisponibilidadeUsuario(n).pipe((0,b.U)(t=>this.usernameStatus=t)).subscribe({next:()=>this.novoUsuarioForm.controls.username.setErrors(this.usernameStatus.message?null:{usuarioIndisponivel:!0})})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(s.qu),e.Y36(l.F0),e.Y36(Z),e.Y36(f.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-novo-usuario"]],decls:33,vars:7,consts:[[1,""],[1,"container","py-2","h-100"],[1,"row","d-flex","align-items-center","justify-content-center","h-100"],[1,"col-md-8","col-lg-7","col-xl-6"],["src","assets/img/register.svg","alt","Phone image",1,"img-fluid"],[1,"col-md-7","col-lg-5","col-xl-5","offset-xl-1"],[1,"d-flex","justify-content-center","display-1"],[3,"formGroup","submit"],["mensagem","Usuario deve ter no m\xednimo 4 caracteres",4,"ngIf"],[1,"form-outline","mb-1"],["class","alert alert-warning",4,"ngIf"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control","form-control-lg",3,"blur"],["mensagem","Insira um e-mail v\xe1lido.",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control","form-control-lg"],["mensagem","Minimo 8 caracteres",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control","form-control-lg"],["mensagem","As senhas precisam ser iguais",4,"ngIf"],["for","password2",1,"form-label"],["type","password","id","password2","formControlName","password2",1,"form-control","form-control-lg"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-success","btn-lg","btn-block","w-50","mt-4",3,"disabled"],["mensagem","Usuario deve ter no m\xednimo 4 caracteres"],[1,"alert","alert-warning"],["mensagem","Insira um e-mail v\xe1lido."],["mensagem","Minimo 8 caracteres"],["mensagem","As senhas precisam ser iguais"]],template:function(n,t){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"h1",6),e._uU(7,"Cadastro"),e.qZA(),e.TgZ(8,"form",7),e.NdJ("submit",function(){return t.cadastrar()}),e.YNc(9,T,1,0,"app-mensagens",8),e.TgZ(10,"div",9),e.YNc(11,y,2,0,"div",10),e.TgZ(12,"label",11),e._uU(13,"Usu\xe1rio"),e.qZA(),e.TgZ(14,"input",12),e.NdJ("blur",function(){let i;return t.verificarDisponibilidade(null==(i=t.novoUsuarioForm.get("username"))?null:i.value)}),e.qZA()(),e.YNc(15,F,1,0,"app-mensagens",13),e.TgZ(16,"div",9)(17,"label",14),e._uU(18,"Email"),e.qZA(),e._UZ(19,"input",15),e.qZA(),e.YNc(20,w,1,0,"app-mensagens",16),e.TgZ(21,"div",9)(22,"label",17),e._uU(23,"Senha"),e.qZA(),e._UZ(24,"input",18),e.qZA(),e.YNc(25,N,1,0,"app-mensagens",19),e.TgZ(26,"div",9)(27,"label",20),e._uU(28,"Repita a senha"),e.qZA(),e._UZ(29,"input",21),e.qZA(),e.TgZ(30,"div",22)(31,"button",23),e._uU(32," Cadastrar "),e.qZA()()()()()()()),2&n){let a,i,m,p,v;e.xp6(8),e.Q6J("formGroup",t.novoUsuarioForm),e.xp6(1),e.Q6J("ngIf",(null==(a=t.novoUsuarioForm.get("username"))?null:a.hasError("minlength"))&&(null==(a=t.novoUsuarioForm.get("username"))?null:a.touched)),e.xp6(2),e.Q6J("ngIf",!t.usernameStatus.message&&(null==(i=t.novoUsuarioForm.get("username"))?null:i.touched)),e.xp6(4),e.Q6J("ngIf",(null==(m=t.novoUsuarioForm.get("email"))||null==m.errors?null:m.errors.email)&&(null==(m=t.novoUsuarioForm.get("email"))?null:m.touched)),e.xp6(5),e.Q6J("ngIf",(null==(p=t.novoUsuarioForm.get("password"))?null:p.hasError("minlength"))&&(null==(p=t.novoUsuarioForm.get("password2"))?null:p.touched)),e.xp6(5),e.Q6J("ngIf",(null==t.novoUsuarioForm.errors?null:t.novoUsuarioForm.errors.senhasDiferentes)&&(null==(v=t.novoUsuarioForm.get("password2"))?null:v.touched)),e.xp6(6),e.Q6J("disabled",!t.novoUsuarioForm.valid)}},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,C],styles:[".image-resize[_ngcontent-%COMP%]{transform:scale(1)}"]}),o})();var J=u(8505);let S=(()=>{class o{constructor(n,t){this.httpClient=n,this.usuarioService=t,this.url="https://angular-auth.fly.dev"}autenticar(n,t){return this.httpClient.post(this.url+"/user/login",{username:n,password:t},{observe:"response"}).pipe((0,J.b)(a=>{const i=a.headers.get("x-access-token")??"";this.usuarioService.salvaToken(i)}))}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(d.eN),e.LFG(f.i))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const I=[{path:"",component:(()=>{class o{constructor(n){this.router=n,this.toggleTab=!1}ngOnInit(){this.router.navigate(["home/login"])}activateButton(){this.toggleTab=!this.toggleTab,this.router.navigate(this.toggleTab?["home/novousuario"]:["home/login"])}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:8,vars:2,consts:[[1,"pt-4"],[1,"d-flex","justify-content-center","w-100"],[3,"ngClass","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.activateButton()}),e._uU(3,"Login"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.activateButton()}),e._uU(5,"Cadastro"),e.qZA()(),e.TgZ(6,"div"),e._UZ(7,"router-outlet"),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngClass",t.toggleTab?"btn btn-secondary btn-lg w-50":"btn btn-success   btn-lg w-50"),e.xp6(2),e.Q6J("ngClass",t.toggleTab?"btn btn-success btn-lg w-50":"btn btn-secondary btn-lg w-50"))},dependencies:[c.mk,l.lC]}),o})(),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class o{constructor(n,t){this.authService=n,this.router=t,this.usuario="",this.senha=""}ngOnInit(){}login(){this.authService.autenticar(this.usuario,this.senha).subscribe({next:()=>this.router.navigate(["dashboard"]),error:()=>{alert("Usu\xe1rio ou senha inv\xe1lidos(s)")}})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(S),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:28,vars:2,consts:[[1,""],[1,"container","py-2","h-100"],[1,"row","d-flex","align-items-center","justify-content-center","h-100"],[1,"col-md-8","col-lg-7","col-xl-6"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg","alt","Mo\xe7a segurando uma chave azul na frente de um celular gigante que possui uma fechadura.",1,"img-fluid"],[1,"col-md-7","col-lg-5","col-xl-5","offset-xl-1"],[1,"d-flex","justify-content-center","display-1"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"form-outline","mb-2"],["for","username",1,"form-label"],["type","text","id","username","name","usuario",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["type","password","id","password","name","senha",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-around","align-items-center","mb-2"],[1,"form-check"],["type","checkbox","value","","id","form1Example3","checked","",1,"form-check-input"],["for","form1Example3",1,"form-check-label"],["href","#!"],[1,"d-flex","justify-content-center","mt-5"],["type","submit",1,"btn","btn-success","btn-lg","btn-block","w-50"]],template:function(n,t){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"h1",6),e._uU(7,"Login"),e.qZA(),e.TgZ(8,"form",7,8),e.NdJ("ngSubmit",function(){return t.login()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Usuario"),e.qZA(),e.TgZ(13,"input",11),e.NdJ("ngModelChange",function(i){return t.usuario=i}),e.qZA()(),e.TgZ(14,"div",9)(15,"label",12),e._uU(16,"Senha"),e.qZA(),e.TgZ(17,"input",13),e.NdJ("ngModelChange",function(i){return t.senha=i}),e.qZA()(),e.TgZ(18,"div",14)(19,"div",15),e._UZ(20,"input",16),e.TgZ(21,"label",17),e._uU(22," Lembrar-me "),e.qZA()(),e.TgZ(23,"a",18),e._uU(24,"Esqueceu a senha?"),e.qZA()(),e.TgZ(25,"div",19)(26,"button",20),e._uU(27," Entrar "),e.qZA()()()()()()()),2&n&&(e.xp6(13),e.Q6J("ngModel",t.usuario),e.xp6(4),e.Q6J("ngModel",t.senha))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.On,s.F]}),o})()},{path:"novousuario",component:A}]}];let k=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.Bz.forChild(I),l.Bz]}),o})(),q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,k,s.u5,s.UX,h]}),o})()}}]);